webpackJsonp([4],{5:function(e,t,o){o("j1ja"),e.exports=o("TCIo")},"7wdk":function(e,t){},"9Q6R":function(e,t,o){e.exports=o.p+"images/copyright.a1061f9.jpg"},IXQP:function(e,t,o){"use strict";var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"copy-right"},[t("img",{attrs:{src:o("9Q6R"),alt:""}})])}]};var n=o("VU/8")({name:"CopyRight"},r,!1,function(e){o("kT+l")},"data-v-699a0a41",null);t.a=n.exports},RBdt:function(e,t,o){"use strict";t.a=function(e,t){return{code:{mobileCN:/^1[0-9]{10}$/,mobileUSA:/^[0-9]{10,11}$/,mobileAUD:/^[0-9]{9,10}$/,mobileNZD:/^[0-9]{9,10}$/,mobileHK:/^[0-9]{8,9}$/,mobileMacau:/(^0\d{8}$)|(^6\d{7}$)/,mobileTW:/^[0-9]{9,10}$/,mobileUK:/(^0\d{10}$)|(^7\d{9}$)/,mobileFrance:/^[0-9]{9,10}$/,mobileGermany:/^[0-9]{10,11}$/,mobileBelgium:/(^0\d{9}$)|(^4\d{8}$)/,mobileItaly:/(^0\d{10}$)|(^3\d{9}$)/,mobileSpain:/(^0\d{9}$)|(^7\d{8}$)|(^6\d{8}$)/,mobileSwiss:/^[0-9]{9,10}$/,mobileHolland:/(^0\d{9}$)|(^6\d{8}$)/,mobileGreece:/(^0\d{10}$)|(6\d{9}$)/,mobileNorway:/(^0\d{8}$)|(^4\d{7}$)|(^9\d{7}$)/,mobileMalaysia:/^\d+$/}[e].test(t),msg:{mobileCN:"请输入正确的手机号(中国)",mobileUSA:"请输入正确的手机号(美国/加拿大)",mobileAUD:"请输入正确的手机号(澳大利亚)",mobileNZD:"请输入正确的手机号(新西兰)",mobileHK:"请输入正确的手机号(香港)",mobileMacau:"请输入正确的手机号(澳门)",mobileTW:"请输入正确的手机号(台湾)",mobileUK:"请输入正确的手机号(英国)",mobileFrance:"请输入正确的手机号(法国)",mobileGermany:"请输入正确的手机号(德国)",mobileBelgium:"请输入正确的手机号(比利时)",mobileItaly:"请输入正确的手机号(意大利)",mobileSpain:"请输入正确的手机号(西班牙)",mobileSwiss:"请输入正确的手机号(瑞士)",mobileHolland:"请输入正确的手机号(荷兰)",mobileGreece:"请输入正确的手机号(希腊)",mobileNorway:"请输入正确的手机号(挪威)",mobileMalaysia:"请输入正确的手机号(马来西亚)"}[e]}}},TCIo:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),n=o("Dd8w"),a=o.n(n),i=o("NYxO"),s=o("VXLi"),c=o("U9Zw"),l=o("RBdt"),u=o("kao3"),m={name:"Phone",data:function(){return{seconds:60,timer:null,phoneCode:c.a,phoneerror:!1,codeerror:!1,passerror:!1}},props:["loginType","changeState","getAuthcode","phoneRegister","loading","phoneForm","getAuthcodeSuccess","phoneError"],computed:{phoneType:function(){var e=this;return c.a.find(function(t){return t.code===e.phoneForm.areacode})||{}}},methods:{sendAutheCode:function(){var e=this.phoneForm,t=e.phone,o=e.areacode,r=c.a.find(function(e){return e.code===o}),n=Object(l.a)(r.key,t);if(!n.code)return this.changeState({key:"phoneError",value:n.msg}),void(this.phoneerror=!0);this.phoneerror=!1,location.href.indexOf("www.lulutrip.com/m")>-1?(this.setInter(),this.getAuthcode()):u.a.qqVerification([this.setInter,this.getAuthcode])},setInter:function(){var e=this;this.seconds=60,this.timer=setInterval(function(){e.seconds>0?e.seconds--:(clearInterval(e.timer),e.seconds=60)},1e3)},submitLogin:function(){var e=this.phoneForm,t=e.phone,o=e.areacode,r=e.authcode,n=e.password,a=c.a.find(function(e){return e.code===o}),i=Object(l.a)(a.key,t);return i.code?(this.phoneerror=!1,/^\d{6}$/.test(r)?(this.codeerror=!1,n?(this.passerror=!1,void this.phoneRegister()):(this.changeState({key:"phoneError",value:"请输入密码(6-16位字母数字)！"}),void(this.passerror=!0))):(this.changeState({key:"phoneError",value:"请输入六位数短信验证码！"}),void(this.codeerror=!0))):(this.changeState({key:"phoneError",value:i.msg}),void(this.phoneerror=!0))}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"phone"},[o("form",[o("div",{class:{group:!0,tel:!0,error:e.phoneerror}},[o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.phoneForm.phone,expression:"phoneForm.phone",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:e.phoneForm.phone},on:{input:function(t){t.target.composing||e.$set(e.phoneForm,"phone",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),o("div",{staticClass:"code"},[o("span",[e._v(e._s(e.phoneType.name)+"+"+e._s(e.phoneType.code))]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.phoneForm.areacode,expression:"phoneForm.areacode"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.phoneForm,"areacode",t.target.multiple?o:o[0])}}},e._l(e.phoneCode,function(t,r){return o("option",{key:r,domProps:{value:t.code}},[e._v("\n            +"+e._s(t.code)+" "+e._s(t.name)+"\n          ")])}))])]),e._v(" "),o("div",{class:{group:!0,error:e.codeerror}},[o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.phoneForm.authcode,expression:"phoneForm.authcode",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.phoneForm.authcode},on:{input:function(t){t.target.composing||e.$set(e.phoneForm,"authcode",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.seconds<60?o("div",{staticClass:"authecode disable"},[e._v("重新发送( "+e._s(e.seconds)+" )")]):o("div",{staticClass:"authecode",attrs:{id:"qqVerification"},on:{click:e.sendAutheCode}},[e._v("发送验证码")])]),e._v(" "),o("div",{class:{group:!0,error:e.passerror}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneForm.password,expression:"phoneForm.password"}],attrs:{type:"password",autocomplete:"no",placeholder:"请输入密码(6-16位字母数字)"},domProps:{value:e.phoneForm.password},on:{input:function(t){t.target.composing||e.$set(e.phoneForm,"password",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"error-msg"},[e._v(e._s(e.phoneError))]),e._v(" "),e.loading?o("div",{staticClass:"btn"},[e._v("注册中...")]):o("div",{staticClass:"btn",on:{click:e.submitLogin}},[e._v("注册")])]),e._v(" "),e.getAuthcodeSuccess?o("div",{staticClass:"send-success"},[e._v("发送成功")]):e._e()])},staticRenderFns:[]};var p=o("VU/8")(m,d,!1,function(e){o("zgt/")},"data-v-f852f748",null).exports,h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"email"},[o("form",[o("div",{class:{group:!0,error:e.emailerror}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.emailForm.email,expression:"emailForm.email"}],attrs:{type:"text",placeholder:"请输入邮箱"},domProps:{value:e.emailForm.email},on:{input:function(t){t.target.composing||e.$set(e.emailForm,"email",t.target.value)}}})]),e._v(" "),o("div",{class:{group:!0,error:e.passerror}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.emailForm["reg-pwd"],expression:"emailForm['reg-pwd']"}],attrs:{type:"password",autocomplete:"no",placeholder:"请输入密码(6-16位字母数字)"},domProps:{value:e.emailForm["reg-pwd"]},on:{input:function(t){t.target.composing||e.$set(e.emailForm,"reg-pwd",t.target.value)}}})]),e._v(" "),o("div",{class:{group:!0,error:e.passcheckerror}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.emailForm["reg-pwd-check"],expression:"emailForm['reg-pwd-check']"}],attrs:{type:"password",autocomplete:"no",placeholder:"请输入密码(6-16位字母数字)"},domProps:{value:e.emailForm["reg-pwd-check"]},on:{input:function(t){t.target.composing||e.$set(e.emailForm,"reg-pwd-check",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"error-msg"},[e._v(e._s(e.emailError))]),e._v(" "),e.loading?o("div",{staticClass:"btn"},[e._v("注册中...")]):o("div",{staticClass:"btn",on:{click:e.submitLogin}},[e._v("注册")])])])},staticRenderFns:[]};var g=o("VU/8")({name:"Email",data:function(){return{emailerror:!1,passerror:!1,passcheckerror:!1}},props:["emailForm","emailRegister","loading","emailError","changeState"],methods:{submitLogin:function(){return/^\w+([-.]\w+)*@\w+([-]\w+)*\.(\w+([-]\w+)*\.)*[a-z]{2,3}$/.test(this.emailForm.email)?(this.emailerror=!1,this.emailForm["reg-pwd"]?(this.passerror=!1,this.emailForm["reg-pwd"]!==this.emailForm["reg-pwd-check"]?(this.changeState({key:"emailError",value:"两次密码输入不一致，请重试！"}),void(this.passcheckerror=!0)):(this.passcheckerror=!0,void this.emailRegister())):(this.changeState({key:"emailError",value:"请输入密码(6-16位字母数字)！"}),void(this.passerror=!0))):(this.changeState({key:"emailError",value:"请输入正确的邮箱地址！"}),void(this.emailerror=!0))}}},h,!1,function(e){o("mANf")},"data-v-00647bea",null).exports,f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bottom"},[t("span",{on:{click:this.toggle}},[this._v("邮箱账号注册")])])},staticRenderFns:[]};var v=o("VU/8")({name:"Bottom",props:["changeState"],methods:{toggle:function(){this.changeState({key:"loginType",value:2})}}},f,!1,function(e){o("7wdk")},"data-v-7218ba4a",null).exports,b=o("IXQP"),y={name:"App",components:{SimpleHeader:s.a,Phone:p,Email:g,Bottom:v,CopyRight:b.a},computed:a()({},Object(i.e)({loginType:function(e){return e.loginType},loading:function(e){return e.loading},phoneForm:function(e){return e.phoneForm},emailForm:function(e){return e.emailForm},getAuthcodeSuccess:function(e){return e.getAuthcodeSuccess},phoneError:function(e){return e.phoneError},emailError:function(e){return e.emailError},registerSuccess:function(e){return e.registerSuccess}})),methods:a()({},Object(i.d)({changeState:"CHANGE_STATE"}),Object(i.b)({getAuthcode:"getAuthcode",phoneRegister:"phoneRegister",emailRegister:"emailRegister"}))},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"register"},[o("div",{staticClass:"content"},[o("SimpleHeader"),e._v(" "),o("transition",{attrs:{name:"fade"}},[1===e.loginType?o("Phone",{attrs:{"login-type":e.loginType,"change-state":e.changeState,"get-authcode":e.getAuthcode,"phone-register":e.phoneRegister,loading:e.loading,"phone-form":e.phoneForm,"get-authcode-success":e.getAuthcodeSuccess,"phone-error":e.phoneError}}):o("Email",{attrs:{"email-form":e.emailForm,"email-register":e.emailRegister,"email-error":e.emailError,"change-state":e.changeState}})],1),e._v(" "),1===e.loginType?o("Bottom",{attrs:{"change-state":e.changeState}}):e._e(),e._v(" "),e.registerSuccess?o("div",{staticClass:"success"},[e._v("注册成功，跳转中...")]):e._e()],1),e._v(" "),o("CopyRight")],1)},staticRenderFns:[]};var w,k=o("VU/8")(y,_,!1,function(e){o("WqPC")},"data-v-cc598346",null).exports,C=o("bOdI"),E=o.n(C),S=o("Xxa5"),A=o.n(S),T=o("exGp"),F=o.n(T),x=o("gyMJ"),$=E()({},"CHANGE_STATE",function(e,t){e[t.key]=t.value}),N=x.a.getAuthcode,R=x.a.phoneRegister,j=x.a.emailRegister,U={getAuthcode:function(e){var t=this,o=e.commit,r=e.state;return F()(A.a.mark(function e(){var n,a,i,s;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.phoneForm,a=n.areacode,i=n.phone,o("CHANGE_STATE",{key:"loading",value:!0}),e.next=4,N({areacode:a,phone:i});case 4:1===(s=e.sent).flag?(o("CHANGE_STATE",{key:"getAuthcodeSuccess",value:!0}),setTimeout(function(){o("CHANGE_STATE",{key:"getAuthcodeSuccess",value:!1})},1e3)):o("CHANGE_STATE",{key:"phoneError",value:"获取短信验证码失败，"+s.msg}),o("CHANGE_STATE",{key:"loading",value:!1});case 7:case"end":return e.stop()}},e,t)}))()},phoneRegister:function(e){var t=this,o=e.commit,r=e.state;return F()(A.a.mark(function e(){var n,i;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.phoneForm,o("CHANGE_STATE",{key:"loading",value:!0}),e.next=4,R(a()({},n,{areacode:Number(n.areacode)}));case 4:1===(i=e.sent).flag?(o("CHANGE_STATE",{key:"registerSuccess",value:!0}),setTimeout(function(){var e=i.direct_url||"//app.lulutrip.com/my/home";e.indexOf("memeber/register")>-1&&(e="//app.lulutrip.com/my/home"),location.href=e},1e3)):o("CHANGE_STATE",{key:"phoneError",value:"注册失败，"+i.msg}),o("CHANGE_STATE",{key:"loading",value:!1});case 7:case"end":return e.stop()}},e,t)}))()},emailRegister:function(e){var t=this,o=e.commit,r=e.state;return F()(A.a.mark(function e(){var n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o("CHANGE_STATE",{key:"loading",value:!0}),e.next=3,j(r.emailForm);case 3:1===(n=e.sent).flag?(o("CHANGE_STATE",{key:"registerSuccess",value:!0}),setTimeout(function(){location.href=n.direct_url||"//app.lulutrip.com/my/home"},1e3)):o("CHANGE_STATE",{key:"emailError",value:"注册失败，"+n.msg}),o("CHANGE_STATE",{key:"loading",value:!1});case 6:case"end":return e.stop()}},e,t)}))()}},H=o("apuZ"),O=o.n(H);r.default.use(i.a);var G=new i.a.Store({state:(w={loginType:1,loading:!1,phoneForm:{areacode:"86",phone:"",authcode:"",bdCoupon:"",note:"",password:""},emailForm:{email:"","reg-pwd":"","reg-pwd-check":"",p_contact_name:"",user_type:2},getAuthcodeSuccess:!1,registerSuccess:!1},E()(w,"loading",!1),E()(w,"emailError",""),E()(w,"phoneError",""),w),actions:U,getters:O.a,mutations:$});o("pyoj");r.default.config.productionTip=!1,new r.default({el:"#app",store:G,components:{App:k},template:"<App/>"})},U9Zw:function(e,t,o){"use strict";t.a=[{key:"mobileCN",name:"中国",code:"86"},{key:"mobileUSA",name:"美国/加拿大",code:"1"},{key:"mobileAUD",name:"澳大利亚",code:"61"},{key:"mobileNZD",name:"新西兰",code:"64"},{key:"mobileHK",name:"香港",code:"852"},{key:"mobileMacau",name:"澳门",code:"853"},{key:"mobileTW",name:"台湾",code:"886"},{key:"mobileUK",name:"英国",code:"44"},{key:"mobileFrance",name:"法国",code:"33"},{key:"mobileGermany",name:"德国",code:"49"},{key:"mobileBelgium",name:"比利时",code:"32"},{key:"mobileItaly",name:"意大利",code:"39"},{key:"mobileSpain",name:"西班牙",code:"34"},{key:"mobileSwiss",name:"瑞士",code:"41"},{key:"mobileHolland",name:"荷兰",code:"31"},{key:"mobileGreece",name:"希腊",code:"30"},{key:"mobileNorway",name:"挪威",code:"47"},{key:"mobileMalaysia",name:"马来西亚",code:"0060"}]},VXLi:function(e,t,o){"use strict";var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simple-header"},[t("a",{attrs:{href:"//app.lulutrip.com"}},[t("span")])])}]};var n=o("VU/8")({name:"SimpleHeader"},r,!1,function(e){o("gQK3")},"data-v-d768cc30",null);t.a=n.exports},WqPC:function(e,t){},apuZ:function(e,t){},gQK3:function(e,t){},gyMJ:function(e,t,o){"use strict";var r={};o.d(r,"getAuthcode",function(){return c}),o.d(r,"phoneRegister",function(){return l}),o.d(r,"emailRegister",function(){return u}),o.d(r,"ajaxLogin",function(){return m}),o.d(r,"ajaxSmsLogin",function(){return d}),o.d(r,"checkSms",function(){return p}),o.d(r,"sendEmail",function(){return h}),o.d(r,"tencentCheck",function(){return g}),o.d(r,"resetPwd",function(){return f});var n=o("Dd8w"),a=o.n(n),i=o("Vo7i"),s=location.href.indexOf("www.lulutrip.com/m")>-1?"www.lulutrip.com/m":"app.lulutrip.com",c=function(e){return Object(i.a)({url:"//"+s+"/publics/get_sms_authcode",method:"post",data:e})},l=function(e){return Object(i.a)({url:"//"+s+"/member/phone_register",method:"post",headers:{"Content-Type":"application/json"},data:e})},u=function(e){return Object(i.a)({url:"//"+s+"/member/ajax_register",method:"post",headers:{"Content-Type":"application/json"},data:e})},m=function(e){return Object(i.a)({url:"//"+s+"/member/ajax_login",method:"post",headers:{"Content-Type":"application/json"},data:e})},d=function(e){return Object(i.a)({url:"//"+s+"/member/ajax_login_via_sms",method:"post",headers:{"Content-Type":"application/json"},data:e})},p=function(e){return Object(i.a)({url:"//"+s+"/publics/check_sms_authcode",method:"post",headers:{"Content-Type":"application/json"},data:e})},h=function(e){return Object(i.a)({url:"//"+s+"/user/sendCheckEmail",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){var t="";for(var o in e)t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o])+"&";return t}],data:e})},g=function(e){return Object(i.a)({url:"//"+s+"/publics/check_tencent_captcha",method:"post",headers:{"Content-Type":"application/json"},data:e})},f=function(e){return Object(i.a)({url:"//"+s+"/member/ajax_reset_pwd",method:"post",headers:{"Content-Type":"application/json"},data:e})},v=a()({},r);t.a=v},"kT+l":function(e,t){},kao3:function(e,t,o){"use strict";var r=o("gyMJ"),n=o("lbHh"),a=o.n(n),i=r.a.tencentCheck;t.a={setErrorCookie:function(e){var t=Number(a.a.get(e)||0);a.a.set(e,t+1,{expires:new Date((new Date).getTime()+36e5),path:"/"})},qqVerification:function(e){new TencentCaptcha(document.getElementById("qqVerification"),"2009179719",function(t){0===t.ret&&i({authObj:t}).then(function(t){1===t.flag?e.forEach(function(e){return e()}):alert("防刷验证失败，"+t.msg)})},{bizState:"h5"}).show()}}},lbHh:function(e,t,o){var r,n;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(n="function"==typeof(r=a)?r.call(t,o,t,e):r)||(e.exports=n),!0,e.exports=a(),!!0){var i=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=i,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var r in o)t[r]=o[r]}return t}return function t(o){function r(t,n,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},r.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(n),/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in a)a[l]&&(c+="; "+l,!0!==a[l]&&(c+="="+a[l]));return document.cookie=t+"="+n+c}t||(i={});for(var u=document.cookie?document.cookie.split("; "):[],m=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var p=u[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var g=p[0].replace(m,decodeURIComponent);if(h=o.read?o.read(h,g):o(h,g)||h.replace(m,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===g){i=h;break}t||(i[g]=h)}catch(e){}}return i}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,o){r(t,"",e(o,{expires:-1}))},r.withConverter=t,r}(function(){})})},mANf:function(e,t){},"zgt/":function(e,t){}},[5]);
//# sourceMappingURL=member-register.entry.js.map