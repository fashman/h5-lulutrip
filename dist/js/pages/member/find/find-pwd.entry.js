webpackJsonp([5],{"2wX8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),r=n("Dd8w"),a=n.n(r),i=n("NYxO"),c=n("VXLi"),s={name:"Bottom",props:["changeState","loginType"],methods:{toggle:function(){this.changeState({key:"loginType",value:1===this.loginType?2:1})},handleYsf:function(){ysf&&ysf.open({templateId:2501631})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bottom"},[1===e.loginType?n("span",{on:{click:e.toggle}},[e._v(e._s(1===e.loginType?"使用邮箱找回":"使用手机找回"))]):e._e(),e._v(" "),n("p",[n("a",{on:{click:e.handleYsf}},[e._v("在线客服")]),e._v(" "),n("a",{staticClass:"right",attrs:{href:"tel:4008218973"}},[e._v("400-821-8973")])])])},staticRenderFns:[]};var u=n("VU/8")(s,l,!1,function(e){n("xd5K")},"data-v-4ba82141",null).exports,d=n("U9Zw"),m=n("RBdt"),p=(n("lbHh"),n("kao3")),h={name:"Phone",data:function(){return{seconds:60,timer:null,phoneCode:d.a,phoneerror:!1,codeerror:!1}},props:["loginType","changeState","getAuthcode","phoneCheck","loading","phoneForm","getAuthcodeSuccess","phoneError"],computed:{phoneType:function(){var e=this;return d.a.find(function(t){return t.code===e.phoneForm.areacode})||{}}},methods:{sendAutheCode:function(){var e=this.phoneForm,t=e.phone,n=e.areacode,o=d.a.find(function(e){return e.code===n}),r=Object(m.a)(o.key,t);if(!r.code)return this.changeState({key:"phoneError",value:r.msg}),void(this.phoneerror=!0);this.phoneerror=!1,location.href.indexOf("www.lulutrip.com/m")>-1?(this.setInter(),this.getAuthcode()):p.a.qqVerification([this.setInter,this.getAuthcode])},setInter:function(){var e=this;this.seconds=60,this.timer=setInterval(function(){e.seconds>0?e.seconds--:(clearInterval(e.timer),e.seconds=60)},1e3)},submitLogin:function(){var e=this.phoneForm,t=e.phone,n=e.areacode,o=e.authcode,r=d.a.find(function(e){return e.code===n}),a=Object(m.a)(r.key,t);return a.code?(this.phoneerror=!1,/^\d{6}$/.test(o)?(this.codeerror=!1,void this.phoneCheck()):(this.changeState({key:"phoneError",value:"请输入六位数短信验证码！"}),void(this.codeerror=!0))):(this.changeState({key:"phoneError",value:a.msg}),void(this.phoneerror=!0))}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"phone"},[n("form",[n("div",{class:{group:!0,tel:!0,error:e.phoneerror}},[n("div",{staticClass:"code"},[n("span",[e._v(e._s(e.phoneType.name)+"+"+e._s(e.phoneType.code))]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.phoneForm.areacode,expression:"phoneForm.areacode"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.phoneForm,"areacode",t.target.multiple?n:n[0])}}},e._l(e.phoneCode,function(t,o){return n("option",{key:o,domProps:{value:t.code}},[e._v("\n              +"+e._s(t.code)+" "+e._s(t.name)+"\n            ")])}))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.phoneForm.phone,expression:"phoneForm.phone",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:e.phoneForm.phone},on:{input:function(t){t.target.composing||e.$set(e.phoneForm,"phone",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("div",{class:{group:!0,error:e.codeerror}},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.phoneForm.authcode,expression:"phoneForm.authcode",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.phoneForm.authcode},on:{input:function(t){t.target.composing||e.$set(e.phoneForm,"authcode",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),e._v(" "),e.seconds<60?n("div",{staticClass:"authecode disable"},[e._v("重新发送( "+e._s(e.seconds)+" )")]):n("div",{staticClass:"authecode",attrs:{id:"qqVerification"},on:{click:e.sendAutheCode}},[e._v("发送验证码")])]),e._v(" "),n("div",{staticClass:"error-msg"},[e._v(e._s(e.phoneError))]),e._v(" "),e.loading?n("div",{staticClass:"btn"},[e._v("找回密码...")]):n("div",{staticClass:"btn",on:{click:e.submitLogin}},[e._v("找回密码")])]),e._v(" "),e.getAuthcodeSuccess?n("div",{staticClass:"send-success"},[e._v("发送成功")]):e._e()])},staticRenderFns:[]};var v=n("VU/8")(h,f,!1,function(e){n("bXQJ")},"data-v-0e4a328d",null).exports,g={name:"Email",data:function(){return{emailerror:!1}},props:["emailForm","emailCheck","loading","emailError","changeState","senEmailSuccess","seconds"],methods:{submit:function(){if(!/^\w+([-.]\w+)*@\w+([-]\w+)*\.(\w+([-]\w+)*\.)*[a-z]{2,3}$/.test(this.emailForm.value))return this.changeState({key:"emailError",value:"请输入正确的邮箱地址！"}),void(this.emailerror=!0);this.emailerror=!1,this.emailCheck()},handleYsf:function(){ysf&&ysf.open({templateId:2501631})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"email"},[n("form",[e.senEmailSuccess?n("div",{staticClass:"success"},[n("h3",[e._v(e._s(e.emailForm.value))]),e._v(" "),n("h4",[e._v("验证邮件已发送（24小时有效）请尽快完成验证")]),e._v(" "),n("p",[e._v("如无法正常收到邮件，请检查您的垃圾邮箱和邮箱名称")]),e._v(" "),e.seconds<60?n("div",{staticClass:"disable"},[e._v("没收到？再次发送（"+e._s(e.seconds)+"）")]):n("div",{on:{click:e.submit}},[e._v("没收到？再次发送")])]):n("div",[n("div",{class:{group:!0,error:e.emailerror}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.emailForm.value,expression:"emailForm.value"}],attrs:{type:"text",placeholder:"请输入邮箱"},domProps:{value:e.emailForm.value},on:{input:function(t){t.target.composing||e.$set(e.emailForm,"value",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"error-msg"},[e._v(e._s(e.emailError))]),e._v(" "),e.loading?n("div",{staticClass:"btn"},[e._v("找回密码...")]):n("div",{staticClass:"btn",on:{click:e.submit}},[e._v("找回密码")])])])])},staticRenderFns:[]};var y=n("VU/8")(g,b,!1,function(e){n("Vl6g")},"data-v-149cdde0",null).exports,_=n("IXQP"),C={name:"App",components:{SimpleHeader:c.a,Bottom:u,Phone:v,Email:y,CopyRight:_.a},computed:a()({},Object(i.e)({loginType:function(e){return e.loginType},loading:function(e){return e.loading},phoneForm:function(e){return e.phoneForm},emailForm:function(e){return e.emailForm},getAuthcodeSuccess:function(e){return e.getAuthcodeSuccess},phoneError:function(e){return e.phoneError},emailError:function(e){return e.emailError},senEmailSuccess:function(e){return e.senEmailSuccess},seconds:function(e){return e.seconds}})),methods:a()({},Object(i.d)({changeState:"CHANGE_STATE"}),Object(i.b)({getAuthcode:"getAuthcode",phoneCheck:"phoneCheck",emailCheck:"emailCheck"}))},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"find"},[n("div",{staticClass:"content"},[n("SimpleHeader",{attrs:{text:"找回密码"}}),e._v(" "),n("transition",{attrs:{name:"fade"}},[1===e.loginType?n("Phone",{attrs:{"login-type":e.loginType,"change-state":e.changeState,"get-authcode":e.getAuthcode,"phone-check":e.phoneCheck,loading:e.loading,"phone-form":e.phoneForm,"get-authcode-success":e.getAuthcodeSuccess,"phone-error":e.phoneError}}):n("Email",{attrs:{"email-form":e.emailForm,"email-check":e.emailCheck,"email-error":e.emailError,"change-state":e.changeState,"sen-email-success":e.senEmailSuccess,seconds:e.seconds}})],1),e._v(" "),n("Bottom",{attrs:{"login-type":e.loginType,"change-state":e.changeState}})],1),e._v(" "),n("CopyRight")],1)},staticRenderFns:[]};var E,w=n("VU/8")(C,k,!1,function(e){n("NAdB")},"data-v-16425f22",null).exports,S=n("Xxa5"),A=n.n(S),T=n("exGp"),x=n.n(T),F=n("gyMJ"),$=n("bOdI"),j=n.n($),N=(E={},j()(E,"CHANGE_STATE",function(e,t){e[t.key]=t.value}),j()(E,"REDUCE_SECOND",function(e,t){var n=60,o=setInterval(function(){n>0?(n--,e.seconds=n):(clearInterval(o),e.seconds=60)},1e3)}),E),U=F.a.getAuthcode,O=F.a.checkSms,R=F.a.sendEmail,I={getAuthcode:function(e){var t=this,n=e.commit,o=e.state;return x()(A.a.mark(function e(){var r,a,i,c;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.phoneForm,a=r.areacode,i=r.phone,e.next=3,U({areacode:a,phone:i});case 3:1===(c=e.sent).flag?(n("CHANGE_STATE",{key:"getAuthcodeSuccess",value:!0}),setTimeout(function(){n("CHANGE_STATE",{key:"getAuthcodeSuccess",value:!1})},1e3)):n("CHANGE_STATE",{key:"phoneError",value:"获取短信验证码失败，"+c.msg}),n("CHANGE_STATE",{key:"loading",value:!1});case 6:case"end":return e.stop()}},e,t)}))()},phoneCheck:function(e){var t=this,n=e.commit,o=e.state;return x()(A.a.mark(function e(){var r,a,i,c,s,l;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.phoneForm,a=r.areacode,i=r.phone,c=r.authcode,e.next=3,O({phone:i,areacode:Number(a),authcode:c});case 3:1===(s=e.sent).flag?(l=location.href.indexOf("www.lulutrip.com/m")>-1?"www.lulutrip.com/m":"app.lulutrip.com",location.href="//"+l+"/member/resetpwd?phone="+i+"&areacode="+a):n("CHANGE_STATE",{key:"phoneError",value:"验证码不匹配，"+s.msg}),n("CHANGE_STATE",{key:"loading",value:!1});case 6:case"end":return e.stop()}},e,t)}))()},emailCheck:function(e){var t=this,n=e.commit,o=e.state;return x()(A.a.mark(function e(){var r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(o.emailForm);case 2:1===(r=e.sent).flag?(n("CHANGE_STATE",{key:"senEmailSuccess",value:!0}),n("REDUCE_SECOND")):n("CHANGE_STATE",{key:"emailError",value:"邮件发送失败，"+r.msg}),n("CHANGE_STATE",{key:"loading",value:!1});case 5:case"end":return e.stop()}},e,t)}))()}},H=n("YhYP"),D=n.n(H);o.default.use(i.a);var G=new i.a.Store({state:{loginType:1,loading:!1,phoneForm:{areacode:"86",phone:"",authcode:""},emailForm:{type:"email",value:""},getAuthcodeSuccess:!1,senEmailSuccess:!1,emailError:"",phoneError:"",seconds:60},actions:I,getters:D.a,mutations:N});n("pyoj");o.default.config.productionTip=!1,new o.default({el:"#app",store:G,components:{App:w},template:"<App/>"})},3:function(e,t,n){n("j1ja"),e.exports=n("2wX8")},"9Q6R":function(e,t,n){e.exports=n.p+"images/copyright.a1061f9.jpg"},IXQP:function(e,t,n){"use strict";var o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"copy-right"},[t("img",{attrs:{src:n("9Q6R"),alt:""}})])}]};var r=n("VU/8")({name:"CopyRight"},o,!1,function(e){n("kT+l")},"data-v-699a0a41",null);t.a=r.exports},NAdB:function(e,t){},RBdt:function(e,t,n){"use strict";t.a=function(e,t){return{code:{mobileCN:/^1[0-9]{10}$/,mobileUSA:/^[0-9]{10,11}$/,mobileAUD:/^[0-9]{9,10}$/,mobileNZD:/^[0-9]{9,10}$/,mobileHK:/^[0-9]{8,9}$/,mobileMacau:/(^0\d{8}$)|(^6\d{7}$)/,mobileTW:/^[0-9]{9,10}$/,mobileUK:/(^0\d{10}$)|(^7\d{9}$)/,mobileFrance:/^[0-9]{9,10}$/,mobileGermany:/^[0-9]{10,11}$/,mobileBelgium:/(^0\d{9}$)|(^4\d{8}$)/,mobileItaly:/(^0\d{10}$)|(^3\d{9}$)/,mobileSpain:/(^0\d{9}$)|(^7\d{8}$)|(^6\d{8}$)/,mobileSwiss:/^[0-9]{9,10}$/,mobileHolland:/(^0\d{9}$)|(^6\d{8}$)/,mobileGreece:/(^0\d{10}$)|(6\d{9}$)/,mobileNorway:/(^0\d{8}$)|(^4\d{7}$)|(^9\d{7}$)/,mobileMalaysia:/^\d+$/}[e].test(t),msg:{mobileCN:"请输入正确的手机号(中国)",mobileUSA:"请输入正确的手机号(美国/加拿大)",mobileAUD:"请输入正确的手机号(澳大利亚)",mobileNZD:"请输入正确的手机号(新西兰)",mobileHK:"请输入正确的手机号(香港)",mobileMacau:"请输入正确的手机号(澳门)",mobileTW:"请输入正确的手机号(台湾)",mobileUK:"请输入正确的手机号(英国)",mobileFrance:"请输入正确的手机号(法国)",mobileGermany:"请输入正确的手机号(德国)",mobileBelgium:"请输入正确的手机号(比利时)",mobileItaly:"请输入正确的手机号(意大利)",mobileSpain:"请输入正确的手机号(西班牙)",mobileSwiss:"请输入正确的手机号(瑞士)",mobileHolland:"请输入正确的手机号(荷兰)",mobileGreece:"请输入正确的手机号(希腊)",mobileNorway:"请输入正确的手机号(挪威)",mobileMalaysia:"请输入正确的手机号(马来西亚)"}[e]}}},U9Zw:function(e,t,n){"use strict";t.a=[{key:"mobileCN",name:"中国",code:"86"},{key:"mobileUSA",name:"美国/加拿大",code:"1"},{key:"mobileAUD",name:"澳大利亚",code:"61"},{key:"mobileNZD",name:"新西兰",code:"64"},{key:"mobileHK",name:"香港",code:"852"},{key:"mobileMacau",name:"澳门",code:"853"},{key:"mobileTW",name:"台湾",code:"886"},{key:"mobileUK",name:"英国",code:"44"},{key:"mobileFrance",name:"法国",code:"33"},{key:"mobileGermany",name:"德国",code:"49"},{key:"mobileBelgium",name:"比利时",code:"32"},{key:"mobileItaly",name:"意大利",code:"39"},{key:"mobileSpain",name:"西班牙",code:"34"},{key:"mobileSwiss",name:"瑞士",code:"41"},{key:"mobileHolland",name:"荷兰",code:"31"},{key:"mobileGreece",name:"希腊",code:"30"},{key:"mobileNorway",name:"挪威",code:"47"},{key:"mobileMalaysia",name:"马来西亚",code:"0060"}]},VXLi:function(e,t,n){"use strict";var o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"simple-header"},[t("a",{attrs:{href:"//app.lulutrip.com"}},[t("span")])])}]};var r=n("VU/8")({name:"SimpleHeader"},o,!1,function(e){n("gQK3")},"data-v-d768cc30",null);t.a=r.exports},Vl6g:function(e,t){},YhYP:function(e,t){},bXQJ:function(e,t){},gQK3:function(e,t){},gyMJ:function(e,t,n){"use strict";var o={};n.d(o,"getAuthcode",function(){return s}),n.d(o,"phoneRegister",function(){return l}),n.d(o,"emailRegister",function(){return u}),n.d(o,"ajaxLogin",function(){return d}),n.d(o,"ajaxSmsLogin",function(){return m}),n.d(o,"checkSms",function(){return p}),n.d(o,"sendEmail",function(){return h}),n.d(o,"tencentCheck",function(){return f}),n.d(o,"resetPwd",function(){return v});var r=n("Dd8w"),a=n.n(r),i=n("Vo7i"),c=location.href.indexOf("www.lulutrip.com/m")>-1?"www.lulutrip.com/m":"app.lulutrip.com",s=function(e){return Object(i.a)({url:"//"+c+"/publics/get_sms_authcode",method:"post",data:e})},l=function(e){return Object(i.a)({url:"//"+c+"/member/phone_register",method:"post",headers:{"Content-Type":"application/json"},data:e})},u=function(e){return Object(i.a)({url:"//"+c+"/member/ajax_register",method:"post",headers:{"Content-Type":"application/json"},data:e})},d=function(e){return Object(i.a)({url:"//"+c+"/member/ajax_login",method:"post",headers:{"Content-Type":"application/json"},data:e})},m=function(e){return Object(i.a)({url:"//"+c+"/member/ajax_login_via_sms",method:"post",headers:{"Content-Type":"application/json"},data:e})},p=function(e){return Object(i.a)({url:"//"+c+"/publics/check_sms_authcode",method:"post",headers:{"Content-Type":"application/json"},data:e})},h=function(e){return Object(i.a)({url:"//"+c+"/user/sendCheckEmail",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}],data:e})},f=function(e){return Object(i.a)({url:"//"+c+"/publics/check_tencent_captcha",method:"post",headers:{"Content-Type":"application/json"},data:e})},v=function(e){return Object(i.a)({url:"//"+c+"/member/ajax_reset_pwd",method:"post",headers:{"Content-Type":"application/json"},data:e})},g=a()({},o);t.a=g},"kT+l":function(e,t){},kao3:function(e,t,n){"use strict";var o=n("gyMJ"),r=n("lbHh"),a=n.n(r),i=o.a.tencentCheck;t.a={setErrorCookie:function(e){var t=Number(a.a.get(e)||0);a.a.set(e,t+1,{expires:new Date((new Date).getTime()+36e5),path:"/"})},qqVerification:function(e){new TencentCaptcha(document.getElementById("qqVerification"),"2009179719",function(t){0===t.ret&&i({authObj:t}).then(function(t){1===t.flag?e.forEach(function(e){return e()}):alert("防刷验证失败，"+t.msg)})},{bizState:"h5"}).show()}}},lbHh:function(e,t,n){var o,r;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(a){if(void 0===(r="function"==typeof(o=a)?o.call(t,n,t,e):o)||(e.exports=r),!0,e.exports=a(),!!0){var i=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=i,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function t(n){function o(t,r,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},o.defaults,a)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*a.expires),a.expires=c}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(r),/^[\{\[]/.test(i)&&(r=i)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l]));return document.cookie=t+"="+r+s}t||(i={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,m=0;m<u.length;m++){var p=u[m].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var f=p[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,f):n(h,f)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===f){i=h;break}t||(i[f]=h)}catch(e){}}return i}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}(function(){})})},xd5K:function(e,t){}},[3]);
//# sourceMappingURL=find-pwd.entry.js.map